<NMSMPipelineDocument Version="1.4.0">
	<JointModelPersonalizationTool name="default">
		<!--Directory for input files.-->
		<input_directory>.</input_directory>
		<!--Name of file containing input model, if using the application this has no effect as current model is used.-->
		<input_model_file>UF_Subject_3_scaled.osim</input_model_file>
		<!--Name of file containing output model after tool executaion.-->
		<output_model_file>UF_Subject_3_scaled_JMP.osim</output_model_file>
		<!--The accuracy to compare against, depends on model/data units (0.01 == 1cm for data in units meters).-->
		<allowable_error>0.0050000000000000001</allowable_error>
		<!--List of tasks to be completed by the tool, each Task is a separate optimization.-->
		<JMPTaskList>
			<JMPTask name="Hips and Knees">
				<!--Indicate whether the task is enabled or not.-->
				<is_enabled>true</is_enabled>
				<!--Order of the tasks to be completed-->
				<index>1</index>
				<!--Name of marker file with required data for this JointPersonalizationTask.-->
				<marker_file_name>MarkerFiles\GaitTrial_markers.trc</marker_file_name>
				<!--Space separated list containing marker names to be used in this task.-->
				<marker_names>R_Asis L_Asis Sacral R_Thigh_Superior R_Thigh_Inferior R_Thigh_Lateral R_Knee_Lateral R_Knee_Medial R_Shank_Superior R_Shank_Inferior R_Shank_Lateral R_Heel R_Midfoot_Superior R_Midfoot_Lateral L_Thigh_Superior L_Thigh_Inferior L_Thigh_Lateral L_Shank_Superior L_Shank_Inferior L_Shank_Lateral L_Heel L_Midfoot_Superior L_Midfoot_Lateral</marker_names>
				<!--Time range from marker file to be used to optimize joint personalization.-->
				<time_range>0 1.0700000000000001</time_range>
				<!--Joints that will be optimized in this task.-->
				<JMPJointSet>
					<JMPJoint name="knee_r">
						<!--Joint Parent Frame.-->
						<parent_frame_transformation>
							<!--Three boolean values (separated by spaces) for if the joint translation parameter is to be optimized.-->
							<translation>false false false</translation>
							<!--Three boolean values (separated by spaces) for if the joint orientation parameter is to be optimized.-->
							<orientation>true true false</orientation>
							<!--Translation bounds set the upper and lower limits of the search range around the initial value.-->
							<translation_bounds>0.050000000000000003</translation_bounds>
							<!--Orientation bounds set the upper and lower limits of the search range around the initial value.-->
							<orientation_bounds>0.5</orientation_bounds>
						</parent_frame_transformation>
						<!--Joint Child Frame.-->
						<child_frame_transformation>
							<!--Three boolean values (separated by spaces) for if the joint translation parameter is to be optimized.-->
							<translation>false false false</translation>
							<!--Three boolean values (separated by spaces) for if the joint orientation parameter is to be optimized.-->
							<orientation>true true false</orientation>
							<!--Translation bounds set the upper and lower limits of the search range around the initial value.-->
							<translation_bounds>0.050000000000000003</translation_bounds>
							<!--Orientation bounds set the upper and lower limits of the search range around the initial value.-->
							<orientation_bounds>0.5</orientation_bounds>
						</child_frame_transformation>
					</JMPJoint>
					<JMPJoint name="knee_l">
						<!--Joint Parent Frame.-->
						<parent_frame_transformation>
							<!--Three boolean values (separated by spaces) for if the joint translation parameter is to be optimized.-->
							<translation>false false false</translation>
							<!--Three boolean values (separated by spaces) for if the joint orientation parameter is to be optimized.-->
							<orientation>true true false</orientation>
							<!--Translation bounds set the upper and lower limits of the search range around the initial value.-->
							<translation_bounds>0.050000000000000003</translation_bounds>
							<!--Orientation bounds set the upper and lower limits of the search range around the initial value.-->
							<orientation_bounds>0.5</orientation_bounds>
						</parent_frame_transformation>
						<!--Joint Child Frame.-->
						<child_frame_transformation>
							<!--Three boolean values (separated by spaces) for if the joint translation parameter is to be optimized.-->
							<translation>false false false</translation>
							<!--Three boolean values (separated by spaces) for if the joint orientation parameter is to be optimized.-->
							<orientation>true true false</orientation>
							<!--Translation bounds set the upper and lower limits of the search range around the initial value.-->
							<translation_bounds>0.050000000000000003</translation_bounds>
							<!--Orientation bounds set the upper and lower limits of the search range around the initial value.-->
							<orientation_bounds>0.5</orientation_bounds>
						</child_frame_transformation>
					</JMPJoint>
				</JMPJointSet>
				<!--Bodies that will be optimized in this task.-->
				<JMPBodySet>
					<JMPBody name="pelvis">
						<!--Boolean value for whether the body, with task name, is to be scaled.-->
						<scale_body>true</scale_body>
						<!--Three boolean values (separated by spaces) for which axes the markers should be free to move in (x, y, z) order.-->
						<move_markers>false true false</move_markers>
					</JMPBody>
					<JMPBody name="femur_r">
						<!--Boolean value for whether the body, with task name, is to be scaled.-->
						<scale_body>false</scale_body>
						<!--Three boolean values (separated by spaces) for which axes the markers should be free to move in (x, y, z) order.-->
						<move_markers>true true false</move_markers>
					</JMPBody>
					<JMPBody name="femur_l">
						<!--Boolean value for whether the body, with task name, is to be scaled.-->
						<scale_body>false</scale_body>
						<!--Three boolean values (separated by spaces) for which axes the markers should be free to move in (x, y, z) order.-->
						<move_markers>true true false</move_markers>
					</JMPBody>
					<JMPBody name="tibia_r">
						<!--Boolean value for whether the body, with task name, is to be scaled.-->
						<scale_body>false</scale_body>
						<!--Three boolean values (separated by spaces) for which axes the markers should be free to move in (x, y, z) order.-->
						<move_markers>false true false</move_markers>
					</JMPBody>
					<JMPBody name="tibia_l">
						<!--Boolean value for whether the body, with task name, is to be scaled.-->
						<scale_body>false</scale_body>
						<!--Three boolean values (separated by spaces) for which axes the markers should be free to move in (x, y, z) order.-->
						<move_markers>false true false</move_markers>
					</JMPBody>
				</JMPBodySet>
			</JMPTask>
		</JMPTaskList>
		<!--*Optional* The accuracy of the IKSolver solution in absolute terms. Default is 1e-5. It determines the number of significant digits to which the solution can be trusted.-->
		<accuracy>9.9999999999999995e-07</accuracy>
		<!--*Optional* The minimum step of the least squares algorithm. Default is 1e-4  which means the solution will be optimized to 0.1 mm resolution. -->
		<diff_min_change>0.001</diff_min_change>
		<!--*Optional* The optimality tolerance determines when the lsqnonlin algorithm stops. The larger it is, the earlier the algorithm stops, but with lower accuracy.-->
		<optimality_tolerance>1.0000000000000001e-05</optimality_tolerance>
		<!--*Optional* The function tolerance determines when the lsqnonlin algorithm stops. The larger it is, the earlier the algorithm stops, but with lower accuracy.-->
		<function_tolerance>1.0000000000000001e-05</function_tolerance>
		<!--*Optional* The step tolerance determines when the lsqnonlin algorithm stops. The larger it is, the earlier the algorithm stops, but with lower accuracy.-->
		<step_tolerance>1.0000000000000001e-05</step_tolerance>
		<!--*Optional* The number of allowed iterations for the lsqnonlin, setting this lower can help cancel an optimization that won't converge.-->
		<max_function_evaluations>200</max_function_evaluations>
	</JointModelPersonalizationTool>
</NMSMPipelineDocument>